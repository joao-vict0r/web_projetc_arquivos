<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversor PDF &lt;-&gt; Word</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <style>
        .theme-toggle-btn {
            position: fixed;
            top: 30px;
            right: 30px;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: none;
            background: #f1f1f1;
            box-shadow: 0 2px 8px rgba(0,0,0,0.10);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: background 0.3s;
            z-index: 1000;
        }
        .theme-toggle-btn.dark {
            background: #232323;
            color: #f8f9fa;
        }
        body.dark {
            background: #181818 !important;
            color: #f8f9fa !important;
        }
        .card.dark, .bg-primary.dark {
            background: #232323 !important;
            color: #f8f9fa !important;
        }
        .card-header.dark {
            background: #232323 !important;
            color: #f8f9fa !important;
        }
        .form-label.dark, .text-dark.dark, .form-select.dark, .form-control.dark {
            color: #f8f9fa !important;
            background: #232323 !important;
            border-color: #444 !important;
        }
        /* Header preto, abas texto branco, sem fundo azul/cinza */
        .card-header.bg-primary {
            background-color: #111 !important;
            color: #fff !important;
        }
        .nav-tabs {
            border-bottom: 1px solid #222 !important;
        }
        .nav-tabs .nav-link {
            color: #fff !important;
            background: transparent !important;
            border: none !important;
        }
        .nav-tabs .nav-link.active {
            color: #0d6efd !important;
            background: transparent !important;
            border: none !important;
            font-weight: bold;
            text-decoration: underline;
        }
        .nav-tabs .nav-link:focus, .nav-tabs .nav-link:hover {
            color: #0d6efd !important;
        }
    </style>
</head>
<body>
    <body class="bg-light" id="mainBody">
        <button class="theme-toggle-btn" id="themeBtn" title="Alternar tema">
            <i class="bi bi-moon-fill" id="themeIcon"></i>
        </button>
        <div class="container mt-5">
            <div class="row justify-content-center">
                <div class="col-md-7">
                    <div class="card shadow" id="mainCard">
                        <div class="card-header bg-primary text-white" id="mainHeader">
                            <ul class="nav nav-tabs card-header-tabs" id="tabMenu">
                                <li class="nav-item">
                                    <a class="nav-link active" id="tab-converter" href="#" onclick="showTab('converter')">Conversor PDF &lt;-&gt; Word</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="tab-zip" href="#" onclick="showTab('zip')">Compactador ZIP</a>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <div id="content-converter">
                                <form method="POST" action="/convert" enctype="multipart/form-data">
                                    <div class="mb-3">
                                        <label for="file" class="form-label" id="fileLabel">Selecione o arquivo (PDF ou DOCX):</label>
                                        <input type="file" class="form-control" id="file" name="file" required onchange="autoSelectAction()">
                                    </div>
                                    <div class="mb-3">
                                        <label for="action" class="form-label" id="actionLabel">Tipo de conversão:</label>
                                        <select class="form-select" id="action" name="action" required>
                                            <option value="pdf2word">PDF para Word</option>
                                            <option value="word2pdf">Word para PDF</option>
                                        </select>
                                    </div>
        <script>
            // ...existing code...

            // Detecta o tipo de arquivo e seleciona a ação automaticamente
            function autoSelectAction() {
                const fileInput = document.getElementById('file');
                const actionSelect = document.getElementById('action');
                if (fileInput.files.length > 0) {
                    const fname = fileInput.files[0].name.toLowerCase();
                    if (fname.endsWith('.pdf')) {
                        actionSelect.value = 'pdf2word';
                    } else if (fname.endsWith('.docx')) {
                        actionSelect.value = 'word2pdf';
                    }
                }
            }
        </script>
                                    <button type="submit" class="btn btn-primary w-100">Converter</button>
                                </form>
                            </div>
                            <div id="content-zip" style="display:none;">
                                <form method="POST" action="/convert" enctype="multipart/form-data">
                                    <input type="hidden" name="action" value="zipfile">
                                    <div class="mb-3">
                                        <label for="zipfiles" class="form-label">Selecione arquivos para compactar (ZIP):</label>
                                        <input type="file" class="form-control" id="zipfiles" name="zipfiles" multiple required>
                                    </div>
                                    <button type="submit" class="btn btn-success w-100">Compactar e Baixar ZIP</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            function showTab(tab) {
                document.getElementById('content-converter').style.display = (tab === 'converter') ? '' : 'none';
                document.getElementById('content-zip').style.display = (tab === 'zip') ? '' : 'none';
                document.getElementById('tab-converter').classList.toggle('active', tab === 'converter');
                document.getElementById('tab-zip').classList.toggle('active', tab === 'zip');
            }
        </script>
        <script>
            const themeBtn = document.getElementById('themeBtn');
            const themeIcon = document.getElementById('themeIcon');
            const mainBody = document.getElementById('mainBody');
            const mainCard = document.getElementById('mainCard');
            const mainHeader = document.getElementById('mainHeader');
            const fileLabel = document.getElementById('fileLabel');
            const actionLabel = document.getElementById('actionLabel');

            function setDarkMode(on) {
                if (on) {
                    mainBody.classList.add('dark');
                    mainCard.classList.add('dark');
                    mainHeader.classList.add('dark');
                    fileLabel.classList.add('dark');
                    actionLabel.classList.add('dark');
                    themeBtn.classList.add('dark');
                    themeIcon.classList.remove('bi-moon-fill');
                    themeIcon.classList.add('bi-sun-fill');
                } else {
                    mainBody.classList.remove('dark');
                    mainCard.classList.remove('dark');
                    mainHeader.classList.remove('dark');
                    fileLabel.classList.remove('dark');
                    actionLabel.classList.remove('dark');
                    themeBtn.classList.remove('dark');
                    themeIcon.classList.remove('bi-sun-fill');
                    themeIcon.classList.add('bi-moon-fill');
                }
            }

            // Salvar preferência no localStorage
            function saveThemePref(isDark) {
                localStorage.setItem('themeDark', isDark ? '1' : '0');
            }
            function getThemePref() {
                return localStorage.getItem('themeDark') === '1';
            }

            // Inicializar tema
            setDarkMode(getThemePref());

            themeBtn.addEventListener('click', function() {
                const isDark = !mainBody.classList.contains('dark');
                setDarkMode(isDark);
                saveThemePref(isDark);
            });
        </script>
    </body>
    </html>
</body>
</html>
